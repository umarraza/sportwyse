import{a9 as s,d as c,m as S,H as w,o as n,e as d,a as e,k as E,p as F,z as T,n as u,b as O,h as V,t as I,j as _,O as L}from"./app-39d70025.js";import{h as N}from"./moment-a9aaa855.js";const B={id:"saveSearchModal",class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},z={class:"modal-dialog modal-lg"},j={class:"modal-content"},H=e("div",{class:"modal-header"},[e("h5",{class:"modal-title mt-0",id:"myModalLabel"},"Save Search Script"),e("button",{type:"button",class:"close close-button","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"Ã—")])],-1),R={class:"modal-body"},U={class:"row"},$={class:"col-md-12"},G=e("label",{class:"col-form-label",for:"search_name"},"Search Label:",-1),J={class:"row"},K={class:"col-md-6 mt-3"},Q=e("label",{class:"col-form-label",for:"eventId"},"Old Event:",-1),W=["value"],X={class:"col-md-6 mt-3"},Z=e("label",{class:"col-form-label",for:"playerId"},"Old Player:",-1),ee=["value"],ae={class:"col-md-6"},oe=e("label",{class:"col-form-label",for:"fromDate"},"From Date:",-1),te=["value"],le={class:"col-md-6"},se=e("label",{class:"col-form-label",for:"toDate"},"To Date:",-1),re=["value"],ce={class:"col-md-6 mt-3"},ne=e("label",{class:"col-form-label",for:"toAmount"},"From Amount:",-1),de=["value"],me={class:"col-md-6 mt-3"},pe=e("label",{class:"col-form-label",for:"toAmount"},"To Amount:",-1),ie=["value"],ue={class:"col-md-6 mt-3"},_e=e("label",{class:"col-form-label",for:"newEvent"},"New Event:",-1),ve=["value"],ye={class:"col-md-6 mt-3"},he=e("label",{class:"col-form-label",for:"newPlayer"},"New Player:",-1),fe=["value"],be={key:0,class:"row mt-5"},De={class:"col-md-12"},Se={key:0,class:"alert alert-danger alert-dismissible fade show",role:"alert"},we={key:1,class:"alert alert-danger alert-dismissible fade show",role:"alert"},Ie=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary waves-effect","data-dismiss":"modal"},"Cancel"),e("button",{type:"submit",class:"btn btn-primary waves-effect waves-light"},"Save changes")],-1),Ce={__name:"SaveSearch",props:{propCampId:{type:[Number,String],required:!0},propPlayerId:{type:[Number,String],required:!0},propToAmount:{type:[Number,String],required:!0},propFromAmount:{type:[Number,String],required:!0},propFromDate:{type:[Date,String],required:!0},propToDate:{type:[Date,String],required:!0},propOldCampName:{type:String,required:!0},propOldPlayerName:{type:String,required:!0},propCamps:{type:Array,required:!0},propPlayers:{type:Array,required:!0}},setup(g){const a=g,v=s(a,"propCampId"),y=s(a,"propPlayerId"),h=c(""),f=c(""),r=c(""),m=s(a,"propOldPlayerName"),p=s(a,"propOldCampName"),C=s(a,"propFromDate"),P=s(a,"propToDate"),b=s(a,"propFromAmount"),D=s(a,"propToAmount"),A=S(()=>a.propFromDate!==""?N(a.propFromDate).format("M-D-YYYY"):""),Y=S(()=>a.propToDate!==""?N(a.propToDate).format("M-D-YYYY"):"");w(()=>a.propCampId,()=>{let t=a.propCamps.find(l=>l.id===a.propCampId);t&&(h.value=t.name)}),w(()=>a.propPlayerId,()=>{let t=a.propPlayers.find(l=>l.id===a.propPlayerId);t&&(f.value=t.user.first_name+" "+t.user.last_name)});const o=c({}),q=()=>{let t=!0;o.value={},r.value.trim()||(o.value.search_name="Search name is required.",t=!1);const l=!v.value,i=!y.value;l&&i&&(o.value.camp_player="Please choose either a new event or a new player.",t=!1);const M=!p.value,k=!m.value;return M&&k&&(o.value.old_camp_player="Please choose either an old event or an old player.",t=!1),t},x=()=>{if(q()){const t={search_name:r.value,camp_id:v.value,player_id:y.value,fromDate:C.value,toDate:P.value,fromAmount:b.value,toAmount:D.value,oldCampName:p.value,oldPlayerName:m.value};L.post(route("search-filters.store"),t,{preserveScroll:!0,preserveState:!1,onSuccess:()=>{document.querySelector(".close-button").click()}}),document.querySelector(".close-button").click()}};return(t,l)=>(n(),d("div",B,[e("div",z,[e("div",j,[H,e("form",{onSubmit:E(x,["prevent"])},[e("div",R,[e("div",U,[e("div",$,[G,F(e("input",{type:"text",id:"search_name","onUpdate:modelValue":l[0]||(l[0]=i=>r.value=i),class:u(["form-control",{"error-class":o.value.search_name}]),placeholder:"Search Label"},null,2),[[T,r.value]]),O(V,{class:"mt-2",message:o.value.search_name},null,8,["message"])])]),e("div",J,[e("div",K,[Q,e("input",{type:"text",id:"eventId",value:p.value,class:"form-control",readonly:""},null,8,W)]),e("div",X,[Z,e("input",{type:"text",id:"playerId",value:m.value,class:"form-control",readonly:""},null,8,ee)]),e("div",ae,[oe,e("input",{type:"text",id:"fromDate",value:A.value,class:"form-control",readonly:"",placeholder:"YYYY-MM-DD"},null,8,te)]),e("div",le,[se,e("input",{type:"text",id:"toDate",value:Y.value,class:"form-control",readonly:"",placeholder:"YYYY-MM-DD"},null,8,re)]),e("div",ce,[ne,e("input",{type:"text",id:"fromAmount",value:b.value,class:"form-control",readonly:""},null,8,de)]),e("div",me,[pe,e("input",{type:"text",id:"toAmount",value:D.value,class:"form-control",readonly:""},null,8,ie)]),e("div",ue,[_e,e("input",{type:"text",id:"newEvent",value:h.value,class:u(["form-control",{"error-class":o.value.camp_player}]),readonly:""},null,10,ve)]),e("div",ye,[he,e("input",{type:"text",id:"newPlayer",value:f.value,class:u(["form-control",{"error-class":o.value.camp_player}]),readonly:""},null,10,fe)])]),o.value.camp_player||o.value.old_camp_player?(n(),d("div",be,[e("div",De,[o.value.camp_player?(n(),d("div",Se,I(o.value.camp_player),1)):_("",!0),o.value.old_camp_player?(n(),d("div",we,I(o.value.old_camp_player),1)):_("",!0)])])):_("",!0)]),Ie],32)])])]))}};export{Ce as default};
