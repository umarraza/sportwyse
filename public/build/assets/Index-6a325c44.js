import{d,$ as F,L as U,s as A,o as p,c as x,w as g,a as e,b as u,u as m,l as $,e as v,j as B,f as c,t as i,p as h,z as I,A as C,k as j,i as q,F as L,O as k,a0 as z,a1 as M}from"./app-5970ba1c.js";import{T as y}from"./VueSearchSelect-717b3351.js";import R from"./AppLayout-524581ba.js";import{P as E}from"./Pagination-a07f96ce.js";import H from"./CancelButton-1d08b1be.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import"./Banner-ab1c5b7d.js";import"./Sidebar-8e9db51e.js";import"./Header-d02ccdfd.js";import"./DropdownLink-d586455d.js";const t=r=>(z("data-v-447dbcd9"),r=r(),M(),r),J={class:"row"},K={class:"col-md-12"},Q={class:"card"},W={class:"card-header"},X=t(()=>e("h4",{class:"pl-2"},"All Transactions",-1)),Y={class:"card-header-right"},Z=t(()=>e("i",{class:"fas fa-edit"},null,-1)),ee=t(()=>e("span",null," Batch Update ",-1)),te={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},se={class:"card-body"},oe={class:"row"},le={class:"col-md-4"},ne={class:"form-group"},ae=t(()=>e("label",{class:"col-form-label"},"Select Event (New)",-1)),ie={class:"col-md-4"},de={class:"form-group"},re=t(()=>e("label",{class:"col-form-label"},"Select Player (New)",-1)),ce={class:"col-md-4"},ue={class:"form-group"},me=t(()=>e("label",{class:"col-form-label"},"Select Event (Old)",-1)),_e={class:"col-md-4"},pe={class:"form-group"},fe=t(()=>e("label",{class:"col-form-label"},"Select Player (Old)",-1)),ve={class:"col-md-4"},he={class:"form-group"},ye=t(()=>e("label",{class:"col-form-label"},"From Date",-1)),ge={class:"col-md-4"},be={class:"form-group"},we=t(()=>e("label",{class:"col-form-label"},"To Date",-1)),Pe={class:"col-md-4"},Ae={class:"form-group"},Be=t(()=>e("label",{class:"col-form-label"},"From Amount",-1)),Ie={class:"col-md-4"},Ce={class:"form-group"},ke=t(()=>e("label",{class:"col-form-label"},"To Amount",-1)),Ee={class:"col-md-4"},Ve={class:"form-group"},De=t(()=>e("label",{class:"col-form-label"},"Paginate By Size",-1)),Se=t(()=>e("option",{value:""},"(none)",-1)),Ne=t(()=>e("option",{value:"10"},"10",-1)),Te=t(()=>e("option",{value:"100"},"100",-1)),Oe=t(()=>e("option",{value:"200"},"200",-1)),Fe=t(()=>e("option",{value:"300"},"300",-1)),Ue=t(()=>e("option",{value:"400"},"400",-1)),xe=t(()=>e("option",{value:"500"},"500",-1)),$e=t(()=>e("option",{value:"700"},"700",-1)),je=t(()=>e("option",{value:"900"},"900",-1)),qe=t(()=>e("option",{value:"1000"},"1000",-1)),Le=[Se,Ne,Te,Oe,Fe,Ue,xe,$e,je,qe],ze={class:"col-md-4"},Me=t(()=>e("label",{class:"col-form-label"},"Status",-1)),Re=t(()=>e("option",{value:null},"(none)",-1)),He=t(()=>e("option",{value:"Canceled"},"Canceled",-1)),Ge=t(()=>e("option",{value:"Failed"},"Failed",-1)),Je=t(()=>e("option",{value:"Paid"},"Paid",-1)),Ke=t(()=>e("option",{value:"Refunded"},"Refunded",-1)),Qe=t(()=>e("option",{value:"Requires Confirmation"},"Requires Confirmation",-1)),We=t(()=>e("option",{value:"Requires Payment Method"},"Requires Payment Method",-1)),Xe=[Re,He,Ge,Je,Ke,Qe,We],Ye={class:"row mt-3"},Ze={class:"col-md-12"},et={class:"row mt-5"},tt={class:"col-md-12"},st={class:"pagination-container"},ot={class:"total"},lt=t(()=>e("label",null,"Total Failed Transactions:",-1)),nt=t(()=>e("label",null,"Total (This Page):",-1)),at=t(()=>e("label",null,"Total Assigned: (Event & Player)",-1)),it=t(()=>e("label",null,"Total Pending (Event & Player):",-1)),dt=t(()=>e("label",null,"Total Pending (By Event):",-1)),rt=t(()=>e("label",null,"Total Pending (By Player):",-1)),ct={class:"pagination"},ut={class:"table-responsive b-0","data-pattern":"priority-columns"},mt={class:"table table-xs table-striped"},_t=t(()=>e("th",null,"#",-1)),pt=t(()=>e("i",{class:"fas fa-long-arrow-alt-up"},null,-1)),ft=t(()=>e("i",{class:"fas fa-long-arrow-alt-down"},null,-1)),vt=t(()=>e("th",null,"Event Name (New)",-1)),ht=t(()=>e("th",null,"Player Name (New)",-1)),yt=t(()=>e("i",{class:"fas fa-long-arrow-alt-up"},null,-1)),gt=t(()=>e("i",{class:"fas fa-long-arrow-alt-down"},null,-1)),bt=t(()=>e("i",{class:"fas fa-long-arrow-alt-up"},null,-1)),wt=t(()=>e("i",{class:"fas fa-long-arrow-alt-down"},null,-1)),Pt=t(()=>e("th",null,"Status",-1)),At=t(()=>e("i",{class:"fas fa-long-arrow-alt-up"},null,-1)),Bt=t(()=>e("i",{class:"fas fa-long-arrow-alt-down"},null,-1)),It=t(()=>e("th",null,"Customer ID",-1)),Ct=t(()=>e("th",null,"Invoice Number",-1)),kt=t(()=>e("i",{class:"fas fa-long-arrow-alt-up"},null,-1)),Et=t(()=>e("i",{class:"fas fa-long-arrow-alt-down"},null,-1)),Vt=t(()=>e("th",null,"Payment Intent ID",-1)),Dt=t(()=>e("th",null,"Statement Descriptor",-1)),St=t(()=>e("th",null,"Customer Description",-1)),Nt=["innerHTML"],Tt={class:"form-group text-right mt-3"},Ot=["disabled"],Ft={__name:"Index",props:{camps:Object,players:Object,filters:Object,campsOptions:Object,transactions:Object,uniqueEvents:Object,uniquePlayers:Object,playersOptions:Object,unAssignedCount:Number,allAssignedCount:Number,transactionsCount:Number,unAssignedByEventCount:Number,unAssignedByPlayerCount:Number,totalFailedTransactionsCount:Number,assignedByEventCount:Number,assignedByPlayerCount:Number},setup(r){const n=r,f=d(!1),V=n.players.map(a=>({value:a.id,text:a.user.name})),D=n.camps.map(a=>({value:a.id,text:a.name})),s=F({newPlayerId:d(n.filters.newPlayerId??""),newEventId:d(n.filters.newEventId??""),toDate:d(n.filters.toDate),fromDate:d(n.filters.fromDate??""),toAmount:d(n.filters.toAmount??""),fromAmount:d(n.filters.fromAmount),playerId:d(n.filters.playerId?parseInt(n.filters.playerId):""),eventId:d(n.filters.eventId?parseInt(n.filters.eventId):""),paginateBySize:d(n.filters.paginateBySize??100),allUnAssigned:d(n.filters.allUnAssigned??!1),unAssignedByEvent:d(n.filters.unAssignedByEvent??!1),unAssignedByPlayer:d(n.filters.unAssignedByPlayer??!1),allAssigned:d(n.filters.allAssigned??!1),assignedByPlayer:d(n.filters.assignedByPlayer??!1),assignedByEvent:d(n.filters.assignedByEvent??!1),status:d(n.filters.status??"Failed"),orderByParam:d(""),orderBy:d("asc")}),_=a=>{s.orderBy=s.orderBy==="asc"?"desc":"asc",s.orderByParam=a,b()};U(s,()=>{b()},{deep:!0});const b=()=>{k.get("/stripe",s,{preserveState:!0,preserveScroll:!0,replace:!0})},S=()=>{s.newPlayerId="",s.newEventId="",s.eventId="",s.playerId="",s.fromDate="",s.toDate="",s.fromAmount="",s.toAmount="",s.paginateBySize=100,s.allUnAssigned=!1,s.unAssignedByEvent=!1,s.unAssignedByPlayer=!1,s.allAssigned=!1,s.assignedByPlayer=!1,s.assignedByEvent=!1,s.status="Failed"},N=a=>a.user?`${a.user.first_name} ${a.user.last_name}`:"-",T=()=>{confirm("Are you sure you want to process data?")&&(f.value=!0,k.post(route("stripe.proccess"),{},{onSuccess:a=>{f.value=!1,a.props.flash.warning&&toast.warning(a.props.flash.warning,{position:"bottom-left"})},onErorr:a=>{console.log(a)}}))};return(a,l)=>{const O=A("AddButton"),w=A("VueDatePicker");return p(),x(R,{title:"All Transactions"},{default:g(()=>[e("div",J,[e("div",K,[e("div",Q,[e("div",W,[X,e("div",Y,[u(m($),{href:a.route("stripe.edit"),class:"btn btn-warning mr-1"},{default:g(()=>[Z,ee]),_:1},8,["href"]),r.transactions.data.length?(p(),v("button",{key:0,class:"btn btn-info mr-1",onClick:T},[f.value?(p(),v("span",te)):B("",!0),c(" "+i(f.value?"Processing":"Process Data"),1)])):B("",!0),u(O,{routeLink:a.route("stripe.create")},{default:g(()=>[c(" Import Stripe Data")]),_:1},8,["routeLink"])])]),e("div",se,[e("div",oe,[e("div",le,[e("div",ne,[ae,u(m(y),{options:m(D),modelValue:s.newEventId,"onUpdate:modelValue":l[0]||(l[0]=o=>s.newEventId=o),placeholder:"Select Event (New)"},null,8,["options","modelValue"])])]),e("div",ie,[e("div",de,[re,u(m(y),{options:m(V),modelValue:s.newPlayerId,"onUpdate:modelValue":l[1]||(l[1]=o=>s.newPlayerId=o),placeholder:"Select Player (New)"},null,8,["options","modelValue"])])]),e("div",ce,[e("div",ue,[me,u(m(y),{options:r.uniqueEvents,modelValue:s.eventId,"onUpdate:modelValue":l[2]||(l[2]=o=>s.eventId=o),placeholder:"Select Event (Old)"},null,8,["options","modelValue"])])]),e("div",_e,[e("div",pe,[fe,u(m(y),{options:r.uniquePlayers,modelValue:s.playerId,"onUpdate:modelValue":l[3]||(l[3]=o=>s.playerId=o),placeholder:"Select Player (Old)"},null,8,["options","modelValue"])])]),e("div",ve,[e("div",he,[ye,u(w,{position:"left","enable-time-picker":!1,modelValue:s.fromDate,"onUpdate:modelValue":l[4]||(l[4]=o=>s.fromDate=o),"auto-apply":"",placeholder:"From Date"},null,8,["modelValue"])])]),e("div",ge,[e("div",be,[we,u(w,{position:"left","enable-time-picker":!1,modelValue:s.toDate,"onUpdate:modelValue":l[5]||(l[5]=o=>s.toDate=o),"auto-apply":"",placeholder:"To Date"},null,8,["modelValue"])])]),e("div",Pe,[e("div",Ae,[Be,h(e("input",{type:"number",placeholder:"From Amount","onUpdate:modelValue":l[6]||(l[6]=o=>s.fromAmount=o),class:"form-control"},null,512),[[I,s.fromAmount]])])]),e("div",Ie,[e("div",Ce,[ke,h(e("input",{type:"number",placeholder:"To Amount","onUpdate:modelValue":l[7]||(l[7]=o=>s.toAmount=o),class:"form-control"},null,512),[[I,s.toAmount]])])]),e("div",Ee,[e("div",Ve,[De,h(e("select",{class:"form-control","onUpdate:modelValue":l[8]||(l[8]=o=>s.paginateBySize=o)},Le,512),[[C,s.paginateBySize]])])]),e("div",ze,[Me,h(e("select",{class:"form-control","onUpdate:modelValue":l[9]||(l[9]=o=>s.status=o)},Xe,512),[[C,s.status]])])]),e("div",Ye,[e("div",Ze,[e("button",{class:"btn btn-primary waves-effect ml-1 waves-light",onClick:j(S,["prevent"])},"Reset Filters")])]),e("div",et,[e("div",tt,[e("div",st,[e("div",ot,[lt,c(i(r.totalFailedTransactionsCount)+" ",1),nt,c(i(r.transactionsCount)+" ",1),at,c(i(r.allAssignedCount)+" ",1),it,c(i(r.unAssignedCount)+" ",1),dt,c(i(r.unAssignedByEventCount)+" ",1),rt,c(i(r.unAssignedByPlayerCount),1)]),e("div",ct,[u(E,{links:r.transactions.links},null,8,["links"])])]),e("div",ut,[e("table",mt,[e("thead",null,[e("tr",null,[_t,e("th",{onClick:l[10]||(l[10]=o=>_("customer_email"))},[c("Customer Email "),pt,ft]),vt,ht,e("th",{onClick:l[11]||(l[11]=o=>_("event_name"))},[c("Event Name (Old) "),yt,gt]),e("th",{onClick:l[12]||(l[12]=o=>_("description"))},[c("Player Name (Old) "),bt,wt]),Pt,e("th",{onClick:l[13]||(l[13]=o=>_("created_date"))},[c("Created Date "),At,Bt]),It,Ct,e("th",{onClick:l[14]||(l[14]=o=>_("amount"))},[c("Amount "),kt,Et]),Vt,Dt,St])]),e("tbody",null,[(p(!0),v(L,null,q(r.transactions.data,(o,P)=>(p(),v("tr",{key:P},[e("td",null,i(P+1),1),e("td",null,i(o.customer_email),1),e("td",null,i(o.camp.name??"-"),1),e("td",null,i(N(o.player)),1),e("td",null,i(o.event_name??"-"),1),e("td",null,i(o.description??"-"),1),e("td",{innerHTML:o.status_lebel},null,8,Nt),e("td",null,i(o.date_label),1),e("td",null,i(o.customer_id),1),e("td",null,i(o.invoice_number),1),e("td",null,i(o.amount),1),e("td",null,i(o.payment_intent_id),1),e("td",null,i(o.statement_descriptor),1),e("td",null,i(o.customer_description),1)]))),128))])])]),u(E,{links:r.transactions.links},null,8,["links"])])]),e("div",Tt,[u(H,{routeLink:a.route("stripe.index")},null,8,["routeLink"]),e("button",{type:"submit",disabled:s.allAssigned==="true",class:"btn btn-primary waves-effect ml-1 waves-light"},"Update",8,Ot)])])])])])]),_:1})}}},Gt=G(Ft,[["__scopeId","data-v-447dbcd9"]]);export{Gt as default};
