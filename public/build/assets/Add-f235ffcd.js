import{a7 as q,d as v,T as F,U as A,s as f,o as _,c as Y,w as g,a as s,k as S,b as l,u as t,p as w,A as V,t as p,x as R,e as h,i as X,j as z,F as H,f as P,l as J}from"./app-829f4a20.js";import{T as C}from"./VueSearchSelect-b66bf8eb.js";import K from"./AppLayout-6747b03f.js";import{h as Q}from"./moment-a9aaa855.js";import"./Banner-a74a72e4.js";import"./Sidebar-5c8a8614.js";import"./Header-d09709fb.js";import"./DropdownLink-4c77cc91.js";const W={class:"modal fade bs-example-modal-sm",tabindex:"-1",role:"dialog","aria-labelledby":"mySmallModalLabel","aria-hidden":"true"},Z={class:"modal-dialog modal-xl"},ss={class:"modal-content"},es=s("div",{class:"modal-header"},[s("h5",{class:"modal-title mt-0",id:"mySmallModalLabel"},"Create New Player"),s("button",{type:"button",class:"close modal-close-btn","data-dismiss":"modal","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"Ã—")])],-1),ts={class:"modal-body"},os={class:"form-group row"},as={class:"col-sm-10"},ls={class:"form-group row"},rs={class:"col-sm-10"},ns={class:"form-group row"},ds={class:"col-sm-10"},is={class:"form-group row"},cs={class:"col-sm-10"},ms=s("option",{value:""},"Select Gender",-1),us=s("option",{value:"Male"},"Male",-1),_s=s("option",{value:"Female"},"Female",-1),ps=[ms,us,_s],hs={class:"form-group row"},bs={class:"col-sm-10"},fs=s("option",{value:""},"Select Status",-1),ys=s("option",{value:"Primary"},"Primary",-1),vs=s("option",{value:"Guest"},"Guest",-1),gs=[fs,ys,vs],ws={class:"form-group row"},Vs=s("label",{for:"example-search-input",class:"col-sm-2 col-form-label"},"Birth Date",-1),Ps={class:"col-sm-10"},ks={class:"form-group row"},xs=s("label",{class:"col-sm-2 col-form-label"},"Select Parent",-1),Fs={class:"col-sm-10"},Ss=s("div",{class:"form-group"},[s("div",null,[s("button",{type:"submit",class:"btn btn-primary waves-effect ml-1 waves-light"},"Submit")])],-1),Cs={class:"row"},Us={class:"col-12"},Es={class:"card m-b-30"},Ds={class:"card-header"},Ms=s("h4",{class:"ml-4"},"Add Players",-1),Ns={class:"mb-0"},Ts={class:"card-header-right"},Bs=s("button",{type:"button",class:"btn btn-success waves-effect waves-light mr-1","data-toggle":"modal","data-target":".bs-example-modal-sm"},[s("i",{class:"fa fa-plus"}),P(" Create New Player")],-1),Gs={class:"card-body"},Ls={key:0,class:"col-md-12 text-right"},Os=["onClick"],Is={class:"col-md-6"},$s={class:"form-group"},js=s("label",{class:"col-form-label"},"Name",-1),qs={class:"col-md-6"},As={class:"form-group"},Ys=s("label",{class:"col-form-label"},"Status",-1),Rs=["onUpdate:modelValue"],Xs=s("option",{value:"Primary"},"Primary",-1),zs=s("option",{value:"Guest"},"Guest",-1),Hs=[Xs,zs],Js={class:"col-md-12"},Ks={class:"table table-xs"},Qs=s("th",{class:"p0-th"},"Gender",-1),Ws={style:{width:"65% !important"},class:"p0-th"},Zs=s("th",{class:"p0-th"},"Birth Date",-1),se={style:{width:"65% !important"},class:"p0-th"},ee=s("th",{class:"p0-th"},"Parent Name",-1),te={style:{width:"65% !important"},class:"p0-th"},oe=s("th",{class:"p0-th"},"Parent Email",-1),ae={style:{width:"65% !important"},class:"p0-th"},le=s("th",{class:"p0-th"},"Status",-1),re={style:{width:"65% !important"},class:"p0-th"},ne={key:0,class:"badge badge-success"},de={key:1,class:"badge badge-info"},ie=s("i",{class:"fas fa-plus"},null,-1),ce={class:"row"},me={class:"col-md-12 text-right"},ue=["disabled"],we={__name:"Add",props:{players:{type:Object,required:!0},team:{type:Object,required:!0},guardians:{type:Object,required:!0},errors:{type:Object,required:!1}},setup(y){const m=y,U=m.guardians.map(o=>({value:o.id,text:o.user.first_name+" "+o.user.last_name})),k=q();let E=v({}),x=v({});const D=o=>r.playerForms.filter(d=>d.id===o).length>1,M=(o,e)=>{setTimeout(()=>{if(e.id&&D(e.id)){k.error("Player already added.",{position:"bottom-left"}),e.id="";return}const d=r.playerForms[o].id,i=m.players.find(c=>c.id===d);e.gender=i.gender,e.birth_date=i.birth_date,e.parent_name=i.user.first_name+" "+i.user.last_name,e.parent_email=i.guardian.user.email},10)},r=F({playerForms:[]}),n=F({first_name:"",last_name:"",birth_date:new Date,gender:"",email:"",guardian_id:"",team_id:m.team.id,status:"Primary",redirectUrl:route("club.teams.players.index",m.team.id)}),N=m.players.map(o=>({value:o.id,text:o.user.name})),T=v({id:"",status:"Primary"});A(()=>{r.playerForms.push(T.value)});const B=o=>!!x[o],G=o=>{r.playerForms.splice(o,1)},L=()=>{r.playerForms.push({id:"",status:"Primary"})},O=(o,e="MM-DD-YYYY")=>o?Q(o).format(e):"-",I=()=>{r.post(route("club.teams.players.store",m.team.id),{onFinish:o=>{},onError:o=>{k.error("Validation Error: Please check your input and try again.",{position:"bottom-left"});let e=o;for(let d in e)e.hasOwnProperty(d)&&(E[d]=e[d][0],x[d]=!0)}})},$=()=>{m.errors={},n.transform(o=>({...o})).post(route("club.players.store"),{onFinish:()=>{}}),document.querySelector(".modal-close-btn").click()};return(o,e)=>{const d=f("InputLabel"),i=f("TextInput"),c=f("InputError"),j=f("VueDatePicker");return _(),Y(K,{title:"Camps"},{default:g(()=>[s("div",W,[s("div",Z,[s("div",ss,[es,s("div",ts,[s("form",{onSubmit:S($,["prevent"])},[s("div",os,[l(d,{for:"first_name",class:"col-sm-2 col-form-label",value:"First Name"}),s("div",as,[l(i,{id:"first_name",modelValue:t(n).first_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(n).first_name=a),type:"text",class:"mt-1 block w-full",autofocus:"",autocomplete:"first_name"},null,8,["modelValue"]),l(c,{class:"mt-2",message:t(r).errors.first_name},null,8,["message"])])]),s("div",ls,[l(d,{for:"last_name",class:"col-sm-2 col-form-label",value:"First Name"}),s("div",rs,[l(i,{id:"last_name",modelValue:t(n).last_name,"onUpdate:modelValue":e[1]||(e[1]=a=>t(n).last_name=a),type:"text",class:"mt-1 block w-full",autofocus:"",autocomplete:"last_name"},null,8,["modelValue"]),l(c,{class:"mt-2",message:t(r).errors.last_name},null,8,["message"])])]),s("div",ns,[l(d,{for:"email",class:"col-sm-2 col-form-label",value:"Email"}),s("div",ds,[l(i,{id:"email",modelValue:t(n).email,"onUpdate:modelValue":e[2]||(e[2]=a=>t(n).email=a),type:"email",class:"mt-1 block w-full",autofocus:"",autocomplete:"email"},null,8,["modelValue"]),l(c,{class:"mt-2",message:t(r).errors.email},null,8,["message"])])]),s("div",is,[l(d,{for:"gender",class:"col-sm-2 col-form-label",value:"Gender"}),s("div",cs,[w(s("select",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>t(n).gender=a)},ps,512),[[V,t(n).gender]]),l(c,{message:t(r).errors.gender},null,8,["message"])])]),s("div",hs,[l(d,{for:"status",class:"col-sm-2 col-form-label",value:"Status"}),s("div",bs,[w(s("select",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>t(n).status=a)},gs,512),[[V,t(n).status]]),l(c,{message:t(r).errors.status},null,8,["message"])])]),s("div",ws,[Vs,s("div",Ps,[l(j,{position:"left","enable-time-picker":!1,modelValue:t(n).birth_date,"onUpdate:modelValue":e[5]||(e[5]=a=>t(n).birth_date=a),"auto-apply":""},null,8,["modelValue"])])]),s("div",ks,[xs,s("div",Fs,[l(t(C),{options:t(U),modelValue:t(n).guardian_id,"onUpdate:modelValue":e[6]||(e[6]=a=>t(n).guardian_id=a),placeholder:"Select Parent"},null,8,["options","modelValue"]),l(c,{class:"mt-2",message:t(r).errors.guardian_id},null,8,["message"])])]),Ss],32)])])])]),s("div",Cs,[s("div",Us,[s("div",Es,[s("div",Ds,[Ms,s("p",Ns,p(y.team.name),1),s("div",Ts,[Bs,l(R,{backToListRoute:o.route("club.teams.players.index",y.team.id),class:"btn btn-primary"},null,8,["backToListRoute"])])]),s("div",Gs,[(_(!0),h(H,null,X(t(r).playerForms,(a,b)=>(_(),h("div",{class:"row add-team-box mt-5",key:b},[t(r).playerForms.length>1?(_(),h("div",Ls,[s("button",{class:"btn btn-danger",onClick:u=>G(b)},"X",8,Os)])):z("",!0),s("div",Is,[s("div",$s,[js,l(t(C),{options:t(N),modelValue:a.id,"onUpdate:modelValue":u=>a.id=u,isError:B(`playerForms.${b}.id`),placeholder:"Select player",onBlur:u=>M(b,a)},{default:g(({option:u})=>[s("span",null,p(u.text),1)]),_:2},1032,["options","modelValue","onUpdate:modelValue","isError","onBlur"])])]),s("div",qs,[s("div",As,[Ys,w(s("select",{class:"custom-select","onUpdate:modelValue":u=>a.status=u},Hs,8,Rs),[[V,a.status]])])]),s("div",Js,[s("table",Ks,[s("tr",null,[Qs,s("td",Ws,p(a.gender),1)]),s("tr",null,[Zs,s("td",se,p(O(a.birth_date)),1)]),s("tr",null,[ee,s("td",te,p(a.parent_name),1)]),s("tr",null,[oe,s("td",ae,p(a.parent_email),1)]),s("tr",null,[le,s("td",re,[a.status==="Primary"?(_(),h("span",ne,"Primary")):(_(),h("span",de,"Guest"))])])])])]))),128)),s("div",{class:"row mt-3"},[s("div",{class:"col-md-12",style:{"padding-left":"0 !important"}},[s("button",{type:"button",class:"btn btn-info",onClick:L},[ie,P(" Add another player")])])]),s("div",ce,[s("div",me,[l(t(J),{href:o.route("club.teams.index"),class:"btn btn-secondary mr-1"},{default:g(()=>[P(" Cancel ")]),_:1},8,["href"]),s("button",{type:"button",class:"btn btn-success",disabled:t(r).processing,onClick:S(I,["prevent"])},"Submit",8,ue)])])])])])])]),_:1})}}};export{we as default};
