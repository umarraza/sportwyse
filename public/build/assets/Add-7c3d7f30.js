import{a7 as E,d as p,T as S,S as T,o as n,c as B,w as h,a as t,t as d,b as m,x as N,e as c,i as $,u as i,j as A,p as O,A as j,F as D,f,l as G,k as M}from"./app-e2141c1a.js";import{T as U}from"./VueSearchSelect-c207d1d5.js";import q from"./AppLayout-61b5cdae.js";import"./Banner-d3fd27f2.js";import"./Sidebar-8c6abd70.js";import"./Header-c1e225df.js";import"./DropdownLink-cb4ece3c.js";const L={class:"row"},R={class:"col-12"},X={class:"card m-b-30"},z={class:"card-header"},H=t("h4",{class:"ml-4"},"Add Players",-1),I={class:"mb-0"},J={class:"card-header-right"},K={class:"card-body"},Q={key:0,class:"col-md-12 text-right"},W=["onClick"],Y={class:"col-md-6"},Z={class:"form-group"},tt=t("label",{class:"col-form-label"},"Name",-1),st={class:"col-md-6"},et={class:"form-group"},ot=t("label",{class:"col-form-label"},"Status",-1),at=["onUpdate:modelValue"],rt=t("option",{value:"Primary"},"Primary",-1),lt=t("option",{value:"Guest"},"Guest",-1),nt=[rt,lt],dt={class:"col-md-12"},it={class:"table table-xs"},ct=t("th",{class:"p0-th"},"Gender",-1),_t={style:{width:"65% !important"},class:"p0-th"},ut=t("th",{class:"p0-th"},"Birth Date",-1),pt={style:{width:"65% !important"},class:"p0-th"},ht=t("th",{class:"p0-th"},"Parent Name",-1),mt={style:{width:"65% !important"},class:"p0-th"},yt=t("th",{class:"p0-th"},"Parent Email",-1),bt={style:{width:"65% !important"},class:"p0-th"},ft=t("th",{class:"p0-th"},"Status",-1),vt={style:{width:"65% !important"},class:"p0-th"},gt={key:0,class:"badge badge-success"},kt={key:1,class:"badge badge-info"},Pt=t("i",{class:"fas fa-plus"},null,-1),wt={class:"row"},Ft={class:"col-md-12 text-right"},Vt=["disabled"],$t={__name:"Add",props:{players:{type:Object,required:!0},team:{type:Object,required:!0},errors:{type:Object,required:!1}},setup(_){const u=_,y=E();let v=p({}),b=p({});const g=e=>r.playerForms.filter(s=>s.id===e).length>1,k=(e,o)=>{setTimeout(()=>{if(o.id&&g(o.id)){y.error("Player already added.",{position:"bottom-left"}),o.id="";return}const s=r.playerForms[e].id,a=u.players.find(l=>l.id===s);o.gender=a.gender,o.birth_date=a.birth_date,o.parent_name=a.user.first_name+" "+a.user.last_name,o.parent_email=a.guardian.user.email},10)},r=S({playerForms:[]}),P=u.players.map(e=>({value:e.id,text:e.user.name})),w=p({id:"",status:"Primary"});T(()=>{r.playerForms.push(w.value)});const F=e=>!!b[e],V=e=>{r.playerForms.splice(e,1)},C=()=>{r.playerForms.push({id:"",status:"Primary"})},x=()=>{r.post(route("staff.teams.players.store",u.team.id),{onFinish:e=>{},onError:e=>{y.error("Validation Error: Please check your input and try again.",{position:"bottom-left"});let o=e;for(let s in o)o.hasOwnProperty(s)&&(v[s]=o[s][0],b[s]=!0)}})};return(e,o)=>(n(),B(q,{title:"Camps"},{default:h(()=>[t("div",L,[t("div",R,[t("div",X,[t("div",z,[H,t("p",I,d(_.team.name),1),t("div",J,[m(N,{backToListRoute:e.route("staff.teams.players.index",_.team.id),class:"btn btn-primary"},null,8,["backToListRoute"])])]),t("div",K,[(n(!0),c(D,null,$(i(r).playerForms,(s,a)=>(n(),c("div",{class:"row add-team-box mt-5",key:a},[i(r).playerForms.length>1?(n(),c("div",Q,[t("button",{class:"btn btn-danger",onClick:l=>V(a)},"X",8,W)])):A("",!0),t("div",Y,[t("div",Z,[tt,m(i(U),{options:i(P),modelValue:s.id,"onUpdate:modelValue":l=>s.id=l,isError:F(`playerForms.${a}.id`),placeholder:"Select player",onBlur:l=>k(a,s)},{default:h(({option:l})=>[t("span",null,d(l.text),1)]),_:2},1032,["options","modelValue","onUpdate:modelValue","isError","onBlur"])])]),t("div",st,[t("div",et,[ot,O(t("select",{class:"custom-select","onUpdate:modelValue":l=>s.status=l},nt,8,at),[[j,s.status]])])]),t("div",dt,[t("table",it,[t("tr",null,[ct,t("td",_t,d(s.gender),1)]),t("tr",null,[ut,t("td",pt,d(s.birth_date),1)]),t("tr",null,[ht,t("td",mt,d(s.parent_name),1)]),t("tr",null,[yt,t("td",bt,d(s.parent_email),1)]),t("tr",null,[ft,t("td",vt,[s.status==="Primary"?(n(),c("span",gt,"Primary")):(n(),c("span",kt,"Guest"))])])])])]))),128)),t("div",{class:"row mt-3"},[t("div",{class:"col-md-12",style:{"padding-left":"0 !important"}},[t("button",{type:"button",class:"btn btn-info",onClick:C},[Pt,f(" Add another player")])])]),t("div",wt,[t("div",Ft,[m(i(G),{href:e.route("staff.teams.players.index",_.team.id),class:"btn btn-secondary mr-1"},{default:h(()=>[f(" Cancel ")]),_:1},8,["href"]),t("button",{type:"button",class:"btn btn-success",disabled:i(r).processing,onClick:M(x,["prevent"])},"Submit",8,Vt)])])])])])])]),_:1}))}};export{$t as default};
