import{a7 as T,d as p,T as B,U as D,o as n,c as S,w as h,a as t,t as d,b as m,x as M,e as c,i as N,u as i,j as $,p as A,A as O,F as U,f,l as j,k as G}from"./app-829f4a20.js";import{T as Y}from"./VueSearchSelect-b66bf8eb.js";import q from"./AppLayout-76b99bbc.js";import{h as L}from"./moment-a9aaa855.js";import"./Banner-a74a72e4.js";import"./Sidebar-5bad83fa.js";import"./Header-5ce1296f.js";import"./DropdownLink-4c77cc91.js";const R={class:"row"},X={class:"col-12"},z={class:"card m-b-30"},H={class:"card-header"},I=t("h4",{class:"ml-4"},"Add Players",-1),J={class:"mb-0"},K={class:"card-header-right"},Q={class:"card-body"},W={key:0,class:"col-md-12 text-right"},Z=["onClick"],tt={class:"col-md-6"},st={class:"form-group"},et=t("label",{class:"col-form-label"},"Name",-1),ot={class:"col-md-6"},at={class:"form-group"},rt=t("label",{class:"col-form-label"},"Status",-1),lt=["onUpdate:modelValue"],nt=t("option",{value:"Primary"},"Primary",-1),dt=t("option",{value:"Guest"},"Guest",-1),it=[nt,dt],ct={class:"col-md-12"},_t={class:"table table-xs"},ut=t("th",{class:"p0-th"},"Gender",-1),pt={style:{width:"65% !important"},class:"p0-th"},ht=t("th",{class:"p0-th"},"Birth Date",-1),mt={style:{width:"65% !important"},class:"p0-th"},yt=t("th",{class:"p0-th"},"Parent Name",-1),bt={style:{width:"65% !important"},class:"p0-th"},ft=t("th",{class:"p0-th"},"Parent Email",-1),vt={style:{width:"65% !important"},class:"p0-th"},gt=t("th",{class:"p0-th"},"Status",-1),kt={style:{width:"65% !important"},class:"p0-th"},Pt={key:0,class:"badge badge-success"},wt={key:1,class:"badge badge-info"},Ft=t("i",{class:"fas fa-plus"},null,-1),Vt={class:"row"},Ct={class:"col-md-12 text-right"},xt=["disabled"],At={__name:"Add",props:{players:{type:Object,required:!0},team:{type:Object,required:!0},errors:{type:Object,required:!1}},setup(_){const u=_,y=T();let v=p({}),b=p({});const g=s=>r.playerForms.filter(e=>e.id===s).length>1,k=(s,o)=>{setTimeout(()=>{if(o.id&&g(o.id)){y.error("Player already added.",{position:"bottom-left"}),o.id="";return}const e=r.playerForms[s].id,a=u.players.find(l=>l.id===e);o.gender=a.gender,o.birth_date=a.birth_date,o.parent_name=a.user.first_name+" "+a.user.last_name,o.parent_email=a.guardian.user.email},10)},r=B({playerForms:[]}),P=u.players.map(s=>({value:s.id,text:s.user.name})),w=p({id:"",status:"Primary"});D(()=>{r.playerForms.push(w.value)});const F=s=>!!b[s],V=s=>{r.playerForms.splice(s,1)},C=()=>{r.playerForms.push({id:"",status:"Primary"})},x=(s,o="MM-DD-YYYY")=>s?L(s).format(o):"-",E=()=>{r.post(route("staff.teams.players.store",u.team.id),{onFinish:s=>{},onError:s=>{y.error("Validation Error: Please check your input and try again.",{position:"bottom-left"});let o=s;for(let e in o)o.hasOwnProperty(e)&&(v[e]=o[e][0],b[e]=!0)}})};return(s,o)=>(n(),S(q,{title:"Camps"},{default:h(()=>[t("div",R,[t("div",X,[t("div",z,[t("div",H,[I,t("p",J,d(_.team.name),1),t("div",K,[m(M,{backToListRoute:s.route("staff.teams.players.index",_.team.id),class:"btn btn-primary"},null,8,["backToListRoute"])])]),t("div",Q,[(n(!0),c(U,null,N(i(r).playerForms,(e,a)=>(n(),c("div",{class:"row add-team-box mt-5",key:a},[i(r).playerForms.length>1?(n(),c("div",W,[t("button",{class:"btn btn-danger",onClick:l=>V(a)},"X",8,Z)])):$("",!0),t("div",tt,[t("div",st,[et,m(i(Y),{options:i(P),modelValue:e.id,"onUpdate:modelValue":l=>e.id=l,isError:F(`playerForms.${a}.id`),placeholder:"Select player",onBlur:l=>k(a,e)},{default:h(({option:l})=>[t("span",null,d(l.text),1)]),_:2},1032,["options","modelValue","onUpdate:modelValue","isError","onBlur"])])]),t("div",ot,[t("div",at,[rt,A(t("select",{class:"custom-select","onUpdate:modelValue":l=>e.status=l},it,8,lt),[[O,e.status]])])]),t("div",ct,[t("table",_t,[t("tr",null,[ut,t("td",pt,d(e.gender),1)]),t("tr",null,[ht,t("td",mt,d(x(e.birth_date)),1)]),t("tr",null,[yt,t("td",bt,d(e.parent_name),1)]),t("tr",null,[ft,t("td",vt,d(e.parent_email),1)]),t("tr",null,[gt,t("td",kt,[e.status==="Primary"?(n(),c("span",Pt,"Primary")):(n(),c("span",wt,"Guest"))])])])])]))),128)),t("div",{class:"row mt-3"},[t("div",{class:"col-md-12",style:{"padding-left":"0 !important"}},[t("button",{type:"button",class:"btn btn-info",onClick:C},[Ft,f(" Add another player")])])]),t("div",Vt,[t("div",Ct,[m(i(j),{href:s.route("staff.teams.players.index",_.team.id),class:"btn btn-secondary mr-1"},{default:h(()=>[f(" Cancel ")]),_:1},8,["href"]),t("button",{type:"button",class:"btn btn-success",disabled:i(r).processing,onClick:G(E,["prevent"])},"Submit",8,xt)])])])])])])]),_:1}))}};export{At as default};
